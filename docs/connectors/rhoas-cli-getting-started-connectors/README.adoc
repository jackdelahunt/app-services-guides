////
START GENERATED ATTRIBUTES
WARNING: This content is generated by running npm --prefix .build run generate:attributes
////

//All OpenShift Application Services
:org-name: Application Services
:product-long-rhoas: OpenShift Application Services
:community:
:imagesdir: ./images
:property-file-name: app-services.properties
:samples-git-repo: https://github.com/redhat-developer/app-services-guides
:base-url: https://github.com/redhat-developer/app-services-guides/tree/main/docs/
:sso-token-url: https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token
:cloud-console-url: https://console.redhat.com/
:service-accounts-url: https://console.redhat.com/application-services/service-accounts

//OpenShift Application Services CLI
:base-url-cli: https://github.com/redhat-developer/app-services-cli/tree/main/docs/
:command-ref-url-cli: commands
:installation-guide-url-cli: rhoas/rhoas-cli-installation/README.adoc
:service-contexts-url-cli: rhoas/rhoas-service-contexts/README.adoc

//OpenShift Streams for Apache Kafka
:product-long-kafka: OpenShift Streams for Apache Kafka
:product-kafka: Streams for Apache Kafka
:product-version-kafka: 1
:service-url-kafka: https://console.redhat.com/application-services/streams/
:getting-started-url-kafka: kafka/getting-started-kafka/README.adoc
:kafka-bin-scripts-url-kafka: kafka/kafka-bin-scripts-kafka/README.adoc
:kafkacat-url-kafka: kafka/kcat-kafka/README.adoc
:quarkus-url-kafka: kafka/quarkus-kafka/README.adoc
:nodejs-url-kafka: kafka/nodejs-kafka/README.adoc
:getting-started-rhoas-cli-url-kafka: kafka/rhoas-cli-getting-started-kafka/README.adoc
:topic-config-url-kafka: kafka/topic-configuration-kafka/README.adoc
:consumer-config-url-kafka: kafka/consumer-configuration-kafka/README.adoc
:access-mgmt-url-kafka: kafka/access-mgmt-kafka/README.adoc
:metrics-monitoring-url-kafka: kafka/metrics-monitoring-kafka/README.adoc
:service-binding-url-kafka: kafka/service-binding-kafka/README.adoc
:message-browsing-url-kafka: kafka/message-browsing-kafka/README.adoc

//OpenShift Service Registry
:product-long-registry: OpenShift Service Registry
:product-registry: Service Registry
:registry: Service Registry
:product-version-registry: 1
:service-url-registry: https://console.redhat.com/application-services/service-registry/
:getting-started-url-registry: registry/getting-started-registry/README.adoc
:quarkus-url-registry: registry/quarkus-registry/README.adoc
:getting-started-rhoas-cli-url-registry: registry/rhoas-cli-getting-started-registry/README.adoc
:access-mgmt-url-registry: registry/access-mgmt-registry/README.adoc
:content-rules-registry: https://access.redhat.com/documentation/en-us/red_hat_openshift_service_registry/1/guide/9b0fdf14-f0d6-4d7f-8637-3ac9e2069817[Supported Service Registry content and rules]
:service-binding-url-registry: registry/service-binding-registry/README.adoc

//OpenShift Connectors
:product-long-connectors: OpenShift Connectors
:product-connectors: Connectors
:product-version-connectors: 1
:service-url-connectors: https://console.redhat.com/application-services/connectors
:getting-started-url-connectors: connectors/getting-started-connectors/README.adoc

//OpenShift API Designer
:product-long-api-designer: OpenShift API Designer
:product-api-designer: API Designer
:product-version-api-designer: 1
:service-url-api-designer: https://console.redhat.com/application-services/api-designer/
:getting-started-url-api-designer: api-designer/getting-started-api-designer/README.adoc

//OpenShift API Management
:product-long-api-management: OpenShift API Management
:product-api-management: API Management
:product-version-api-management: 1
:service-url-api-management: https://console.redhat.com/application-services/api-management/

////
END GENERATED ATTRIBUTES
////

[id="chap-connectors-rhoas-cli"]
= Interacting with {product-long-connectors} the rhoas CLI
ifdef::context[:parent-context: {context}]
:context: connectors-rhoas-cli

// Purpose statement for the assembly
[role="_abstract"]
As a developer of {product-connectors}, you can use the `rhoas` command-line interface (CLI) to control and manage your Connectors instances and namespaces.

.Prerequisites
ifndef::community[]
* You have a Red Hat account.
endif::[]
* You have a running Kafka instance in {product-kafka} with a topic called `my-topic`.
* You've installed the latest version of the `rhoas` CLI. See {base-url}{installation-guide-url-cli}[Installing and configuring the rhoas CLI^].

// Condition out QS-only content so that it doesn't appear in docs.
// All QS anchor IDs must be in this alternate anchor ID format `[#anchor-id]` because the ascii splitter relies on the other format `[id="anchor-id"]` to generate module files.
ifdef::qs[]
[#description]
====
Learn how to use the `rhoas` command-line interface (CLI) to produce and consume messages for a Kafka instance.
====

[#introduction]
====
Welcome to the quick start for producing and consuming Kafka messages using the `rhoas` command-line interface (CLI).

In this quick start, you'll use a CLI command to produce messages to different topic partitions in a Kafka instance. You'll then use the {product-long-kafka} web console to inspect the messages. When you're ready, you'll use another CLI command to consume the messages.
====
endif::[]

[id="proc-building-connector-configuration{context}"]
== Building a connectors configuration 

[role="_abstract"]
In this task you will create a configuration file that can be used to create a {product-long-connectors} instance.

.Procedure
. Log in to the `rhoas` CLI.
+
[source]
----
$ rhoas login
----

. Start building a configuration for a {{product-long-connectors} instance.
+
[source,subs="+quotes"]
----
$ rhoas connector build --type=data_generator_0.1
----

You're prompted to enter details based on the Connectors instance type provided.

. Enter `my-topic` as the topic names value.

. Accept the default Content Type by pressing enter when prompted.

. Enter `Hello World!` as the message value.

. Accept the default Period.

.Verification
ifdef::qs[]
* Is there a file called `connector.json` in the current working directory?
endif::[]
ifndef::qs[]
* Verify that the connector specific configuration is set in the `connector.json` file.
endif::[]

[id="proc-create-connector{context}"]
== Creating a {product-long-connectors} from Rhoas CLI
[role="_abstract"]
Once you have build a configuration you can create the Connectors instance from the Rhoas CLI.

.Prerequisites
* You have buillt a Connectors configuration and it is saved locally as `connectors.json`.
* You have a {product-long-kafka} instance running and have a topic called `my-topic`.
* You have a service account created that has read and write access to the kafka topic and you have the credentials saved for use.

.Procedure
. Create a evaluation namespace that the connectors instance will use.
+
[source,subs="+quotes"]
----
$ rhoas namespace create
----

. Run the create command and pass in the current configuration.
+
[source,subs="+quotes"]
----
$ rhoas connector create --file=connector.json 
----

. You're prompted to enter details to create the {product-connectors} instance.

+
Enter `my-connector` as the connector's name.
+
Select the namespace you created when prompted.
+
If prompted select the kafka instance you created with the topic you want to send messages too.
+
Enter the Service Account Client Id when prompted.
+
Enter the Service Account Client Secret when prompted.

. Once the {product-long-connectors} is running run the following command to see if the connector is producing messages as configured.

[source,subs="+quotes"]
----
$ rhoas kafka topic consume --name=my-topic --partition=0 --wait
----

.Verification
* Is there a connectors instance running called `my-connector`.
* Is there messages being received as expected? 

ifdef::qs[]
[#conclusion]
====
Congratulations! You successfully completed the quick start for creating a connectors instance with the `rhoas` CLI.
====
endif::[]

ifdef::parent-context[:context: {parent-context}]
ifndef::parent-context[:!context:]